---
// PolicyModal.astro - Modal component for displaying legal policies
---

<!-- Policy Modal -->
<div id="policy-modal" class="fixed inset-0 z-50 hidden">
  <!-- Backdrop -->
  <div id="policy-backdrop" class="absolute inset-0 bg-black/50 backdrop-blur-sm"></div>

  <!-- Modal Content -->
  <div class="absolute inset-0 flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[85vh] flex flex-col relative">
      <!-- Header -->
      <div class="flex items-center justify-between p-6 border-b border-gray-200">
        <h2 id="policy-title" class="text-2xl font-semibold text-gray-900"></h2>
        <button id="policy-close" class="text-gray-400 hover:text-gray-600 transition-colors p-2 hover:bg-gray-100 rounded-lg">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>

      <!-- Body -->
      <div id="policy-content" class="p-6 overflow-y-auto flex-1 prose prose-gray max-w-none">
        <!-- Content will be injected here -->
      </div>

      <!-- Footer -->
      <div class="p-4 border-t border-gray-200 flex justify-end">
        <button id="policy-accept" class="bg-primary-600 hover:bg-primary-700 text-white px-6 py-2 rounded-lg font-medium transition-colors">
          Close
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Hidden Policy Content -->
<template id="terms-content">
  <p class="text-sm text-gray-500 mb-4">Last updated: January 2025</p>

  <h3>1. Acceptance of Terms</h3>
  <p>By accessing and using GetRaze ("Service"), you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by these terms, please do not use this Service.</p>

  <h3>2. Description of Service</h3>
  <p>GetRaze provides an AI-powered lead generation and prospecting automation platform. Our Service includes tools for finding leads, automating outreach across multiple channels, and managing prospect relationships.</p>

  <h3>3. User Accounts</h3>
  <p>To use certain features of the Service, you must register for an account. You agree to:</p>
  <ul>
    <li>Provide accurate, current, and complete information during registration</li>
    <li>Maintain and promptly update your account information</li>
    <li>Maintain the security of your password and account</li>
    <li>Accept responsibility for all activities that occur under your account</li>
    <li>Notify us immediately of any unauthorized use of your account</li>
  </ul>

  <h3>4. Acceptable Use</h3>
  <p>You agree not to use the Service to:</p>
  <ul>
    <li>Violate any applicable laws or regulations</li>
    <li>Send spam or unsolicited communications</li>
    <li>Harvest or collect personal information without consent</li>
    <li>Interfere with or disrupt the Service or servers</li>
    <li>Attempt to gain unauthorized access to any portion of the Service</li>
    <li>Use the Service for any illegal or unauthorized purpose</li>
  </ul>

  <h3>5. Intellectual Property</h3>
  <p>The Service and its original content, features, and functionality are and will remain the exclusive property of GetRaze and its licensors. The Service is protected by copyright, trademark, and other laws.</p>

  <h3>6. Payment Terms</h3>
  <p>Some features of the Service require payment. You agree to pay all fees associated with your use of the Service. All payments are non-refundable unless otherwise specified.</p>

  <h3>7. Termination</h3>
  <p>We may terminate or suspend your account and access to the Service immediately, without prior notice or liability, for any reason, including breach of these Terms. Upon termination, your right to use the Service will immediately cease.</p>

  <h3>8. Limitation of Liability</h3>
  <p>In no event shall GetRaze, its directors, employees, partners, agents, suppliers, or affiliates be liable for any indirect, incidental, special, consequential, or punitive damages, including loss of profits, data, or other intangible losses.</p>

  <h3>9. Disclaimer</h3>
  <p>The Service is provided on an "AS IS" and "AS AVAILABLE" basis. GetRaze makes no warranties, expressed or implied, regarding the Service's reliability, availability, or fitness for a particular purpose.</p>

  <h3>10. Changes to Terms</h3>
  <p>We reserve the right to modify or replace these Terms at any time. We will provide notice of any material changes by posting the new Terms on this page.</p>

  <h3>11. Contact Us</h3>
  <p>If you have any questions about these Terms, please contact us at legal@getraze.co.</p>
</template>

<template id="privacy-content">
  <p class="text-sm text-gray-500 mb-4">Last updated: January 2025</p>

  <h3>1. Introduction</h3>
  <p>GetRaze ("we," "our," or "us") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our Service.</p>

  <h3>2. Information We Collect</h3>
  <p>We collect information in several ways:</p>

  <h4>Personal Information</h4>
  <ul>
    <li>Name and contact information (email, phone number)</li>
    <li>Account credentials</li>
    <li>Billing and payment information</li>
    <li>Company information</li>
  </ul>

  <h4>Usage Information</h4>
  <ul>
    <li>Log data (IP address, browser type, pages visited)</li>
    <li>Device information</li>
    <li>Usage patterns and preferences</li>
  </ul>

  <h4>Lead Data</h4>
  <ul>
    <li>Business contact information collected through our platform</li>
    <li>Interaction history with prospects</li>
  </ul>

  <h3>3. How We Use Your Information</h3>
  <p>We use collected information to:</p>
  <ul>
    <li>Provide and maintain our Service</li>
    <li>Process transactions and send related information</li>
    <li>Send administrative information and updates</li>
    <li>Respond to inquiries and offer support</li>
    <li>Improve and personalize user experience</li>
    <li>Analyze usage to enhance our Service</li>
    <li>Protect against fraudulent or illegal activity</li>
  </ul>

  <h3>4. Information Sharing</h3>
  <p>We may share your information with:</p>
  <ul>
    <li>Service providers who assist in our operations</li>
    <li>Business partners with your consent</li>
    <li>Legal authorities when required by law</li>
    <li>Affiliated companies within our corporate family</li>
  </ul>

  <h3>5. Data Security</h3>
  <p>We implement appropriate technical and organizational measures to protect your personal information. However, no method of transmission over the Internet is 100% secure, and we cannot guarantee absolute security.</p>

  <h3>6. Data Retention</h3>
  <p>We retain your personal information for as long as necessary to fulfill the purposes outlined in this Privacy Policy, unless a longer retention period is required by law.</p>

  <h3>7. Your Rights</h3>
  <p>Depending on your location, you may have the following rights:</p>
  <ul>
    <li>Access your personal data</li>
    <li>Correct inaccurate data</li>
    <li>Request deletion of your data</li>
    <li>Object to processing of your data</li>
    <li>Data portability</li>
    <li>Withdraw consent</li>
  </ul>

  <h3>8. International Transfers</h3>
  <p>Your information may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place for such transfers.</p>

  <h3>9. Children's Privacy</h3>
  <p>Our Service is not intended for individuals under 18 years of age. We do not knowingly collect personal information from children.</p>

  <h3>10. Changes to This Policy</h3>
  <p>We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new policy on this page and updating the "Last updated" date.</p>

  <h3>11. Contact Us</h3>
  <p>If you have questions about this Privacy Policy, please contact us at privacy@getraze.co.</p>
</template>

<template id="cookies-content">
  <p class="text-sm text-gray-500 mb-4">Last updated: January 2025</p>

  <h3>1. What Are Cookies</h3>
  <p>Cookies are small text files that are placed on your computer or mobile device when you visit a website. They are widely used to make websites work more efficiently and provide information to website owners.</p>

  <h3>2. How We Use Cookies</h3>
  <p>GetRaze uses cookies and similar tracking technologies to:</p>
  <ul>
    <li>Keep you signed in to your account</li>
    <li>Remember your preferences and settings</li>
    <li>Understand how you use our Service</li>
    <li>Improve our Service based on this information</li>
    <li>Provide personalized content and features</li>
  </ul>

  <h3>3. Types of Cookies We Use</h3>

  <h4>Essential Cookies</h4>
  <p>These cookies are necessary for the website to function properly. They enable basic features like page navigation and access to secure areas. The website cannot function properly without these cookies.</p>

  <h4>Performance Cookies</h4>
  <p>These cookies help us understand how visitors interact with our website by collecting and reporting information anonymously. They help us improve how the website works.</p>

  <h4>Functional Cookies</h4>
  <p>These cookies enable the website to provide enhanced functionality and personalization. They may be set by us or by third-party providers whose services we have added to our pages.</p>

  <h4>Analytics Cookies</h4>
  <p>We use analytics cookies to track information about how the Service is used so that we can make improvements. We may also use analytics cookies to test new features and how they perform.</p>

  <h3>4. Third-Party Cookies</h3>
  <p>Some cookies may be placed by third-party services that appear on our pages. We do not control these third-party cookies. The third-party service providers are responsible for their cookies.</p>

  <h3>5. Managing Cookies</h3>
  <p>Most web browsers allow you to control cookies through their settings. You can:</p>
  <ul>
    <li>View cookies stored on your device</li>
    <li>Allow, block, or delete cookies</li>
    <li>Set preferences for certain websites</li>
    <li>Block third-party cookies</li>
  </ul>
  <p>Please note that blocking certain cookies may impact your experience on our website and limit the services we can offer.</p>

  <h3>6. Cookie Consent</h3>
  <p>When you first visit our website, you will be presented with a cookie consent banner. By continuing to use our website, you consent to our use of cookies as described in this policy.</p>

  <h3>7. Changes to This Policy</h3>
  <p>We may update this Cookie Policy from time to time to reflect changes in our practices or for other operational, legal, or regulatory reasons. Please revisit this page regularly to stay informed about our use of cookies.</p>

  <h3>8. Contact Us</h3>
  <p>If you have any questions about our use of cookies, please contact us at privacy@getraze.co.</p>
</template>

<script>
  function initPolicyModal() {
    const modal = document.getElementById('policy-modal');
    const backdrop = document.getElementById('policy-backdrop');
    const closeBtn = document.getElementById('policy-close');
    const acceptBtn = document.getElementById('policy-accept');
    const titleEl = document.getElementById('policy-title');
    const contentEl = document.getElementById('policy-content');

    if (!modal || !backdrop || !closeBtn || !acceptBtn || !titleEl || !contentEl) return;

    const policies = {
      terms: {
        title: 'Terms of Service',
        template: 'terms-content'
      },
      privacy: {
        title: 'Privacy Policy',
        template: 'privacy-content'
      },
      cookies: {
        title: 'Cookie Policy',
        template: 'cookies-content'
      }
    };

    function openModal(policyType: keyof typeof policies) {
      const policy = policies[policyType];
      if (!policy) return;

      const template = document.getElementById(policy.template) as HTMLTemplateElement;
      if (!template) return;

      titleEl.textContent = policy.title;
      contentEl.innerHTML = template.innerHTML;
      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      modal.classList.add('hidden');
      document.body.style.overflow = '';
    }

    // Close modal handlers
    closeBtn.addEventListener('click', closeModal);
    acceptBtn.addEventListener('click', closeModal);
    backdrop.addEventListener('click', closeModal);

    // Close on escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
        closeModal();
      }
    });

    // Listen for custom events to open modal
    window.addEventListener('openPolicy', ((e: CustomEvent) => {
      openModal(e.detail as keyof typeof policies);
    }) as EventListener);

    // Intercept clicks on policy links
    document.querySelectorAll('a[href="/terms"], a[href="/privacy"], a[href="/cookies"]').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const href = (e.currentTarget as HTMLAnchorElement).getAttribute('href');
        if (href === '/terms') openModal('terms');
        else if (href === '/privacy') openModal('privacy');
        else if (href === '/cookies') openModal('cookies');
      });
    });
  }

  // Initialize on DOM load
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initPolicyModal);
  } else {
    initPolicyModal();
  }
</script>

<style>
  #policy-modal {
    animation: fadeIn 0.2s ease-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  #policy-content h3 {
    @apply text-lg font-semibold text-gray-900 mt-6 mb-3;
  }

  #policy-content h4 {
    @apply text-base font-medium text-gray-800 mt-4 mb-2;
  }

  #policy-content p {
    @apply text-gray-600 mb-3 leading-relaxed;
  }

  #policy-content ul {
    @apply list-disc list-inside text-gray-600 mb-4 space-y-1;
  }

  #policy-content li {
    @apply leading-relaxed;
  }
</style>
